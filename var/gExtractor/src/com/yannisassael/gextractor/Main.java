package com.yannisassael.gextractor;

import lib.ldd.data.Material;
import lib.ldd.data.VBOContents;
import lib.ldd.g.BrickReader;
import lib.ldd.lif.LIFReader;
import lib.ldd.materials.MaterialReader;
import lib.util.obj.OBJSaver;

import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;
import java.lang.reflect.Array;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;

public class Main {

    public static void main(String[] args) {
        String path = "/Users/iassael/Drive/Code/projects/github/torch/torch-lego/db/db/";

        //Integer brickId = 3005;
        try {
            // Load Materials
            String materialFilename = path + "Materials.xml";
            File materialFile = new File(materialFilename);
            HashMap<Integer, Material> materials = MaterialReader.loadMaterials(materialFile);
            ArrayList<Material> materialsList = new ArrayList<>(materials.values());
            System.out.println("Loaded " + materialsList.size() + " materials");

            // Print materials for python
            for (Material mat : materialsList) {
                System.out.println("makeMaterial(" + mat.id + ", (" + mat.red / 255.0 + ", " + mat.green / 255.0 + ", " + mat.blue / 255.0 + "), None, " + mat.alpha / 255.0 + ")");
            }

            // Save Materials to MTL
            File mtlFile = new File("objs/materials.mtl");
            PrintWriter mtlPrintWriter = new PrintWriter(mtlFile);
            OBJSaver.writeMaterials(materialsList, mtlPrintWriter);
            System.out.println("Saving " + materialsList.size() + " materials");

            // Flush and close the writer again
            mtlPrintWriter.flush();
            mtlPrintWriter.close();


            // Read all bricks
            ArrayList<Integer> brickFiles = new ArrayList<>(Arrays.asList(new Integer[]{10040, 10042, 10048, 10049, 10050, 10051, 10052, 10053, 10054, 10055, 10056, 10057, 10058, 10065, 10066, 10067, 10113, 10124, 10126, 10127, 10128, 10154, 10164, 10166, 10168, 10169, 10170, 10172, 10173, 10177, 10178, 10183, 10187, 10197, 10201, 10202, 10227, 10247, 10258, 10288, 10301, 10302, 10303, 10304, 10305, 10312, 10313, 10314, 10350, 10352, 10354, 10829, 10830, 10884, 10904, 10907, 10908, 10909, 10928, 11055, 11062, 11089, 11090, 11091, 11092, 11094, 11096, 11097, 11098, 11100, 11101, 11103, 11106, 11107, 11110, 11111, 11112, 11113, 11122, 11125, 11126, 11127, 11129, 11140, 11153, 11156, 11164, 11187, 11203, 11208, 11209, 11211, 11212, 11213, 11214, 11215, 11216, 11217, 11219, 11233, 11241, 11245, 11250, 11252, 11253, 11254, 11255, 11256, 11257, 11258, 11259, 11260, 11261, 11262, 11263, 11264, 11265, 11267, 11268, 11269, 11270, 11271, 11272, 11273, 11275, 11276, 11277, 11278, 11279, 11280, 11281, 11282, 11286, 11287, 11288, 11289, 11290, 11291, 11293, 11294, 11295, 11296, 11297, 11298, 11299, 11301, 11302, 11303, 11305, 11331, 11334, 11336, 11338, 11399, 11418, 11420, 11421, 11422, 11423, 11437, 11438, 11439, 11455, 11458, 11459, 11467, 11476, 11477, 11478, 11538, 11568, 11575, 11589, 11591, 11592, 11593, 11594, 11595, 11597, 11598, 11599, 11601, 11602, 11603, 11605, 11609, 11610, 11618, 11620, 11640, 11641, 11691, 11777, 11778, 11833, 11891, 11900, 11906, 11907, 11908, 11911, 11946, 11947, 11949, 11950, 11953, 11954, 11957, 12549, 12550, 12551, 12607, 12608, 12609, 12610, 12611, 12612, 12613, 12614, 12615, 12617, 12618, 12622, 12818, 12825, 12857, 12884, 12885, 12886, 12887, 12888, 12889, 12890, 12891, 12892, 12893, 12894, 12895, 12897, 12898, 12899, 13037, 13194, 13195, 13196, 13197, 13198, 13249, 13250, 13251, 13252, 13269, 13349, 13361, 13392, 13393, 13459, 13498, 13543, 13547, 13548, 13549, 13562, 13564, 13565, 13571, 13664, 13665, 13695, 13731, 13744, 13745, 13746, 13748, 13750, 13753, 13754, 13756, 13757, 13758, 13760, 13761, 13765, 13766, 13767, 13768, 13783, 13784, 13785, 13786, 13787, 13788, 13789, 13790, 13791, 13792, 13793, 13808, 13809, 13812, 13813, 13946, 13952, 13965, 13971, 13986, 14045, 14137, 14149, 14181, 14290, 14301, 14395, 14397, 14413, 14417, 14418, 14419, 14518, 14520, 14682, 14696, 14704, 14707, 14716, 14718, 14719, 14720, 14732, 14733, 14734, 14736, 14740, 14769, 15038, 15064, 15065, 15066, 15067, 15068, 15070, 15071, 15074, 15082, 15083, 15084, 15086, 15090, 15091, 15092, 15093, 15094, 15095, 15096, 15100, 15101, 15105, 15107, 15108, 15118, 15207, 15208, 15209, 15210, 15254, 15265, 15279, 15284, 15303, 15307, 15308, 15310, 15311, 15332, 15339, 15341, 15343, 15344, 15345, 15346, 15348, 15349, 15350, 15351, 15353, 15354, 15355, 15361, 15362, 15367, 15368, 15369, 15370, 15372, 15373, 15374, 15375, 15377, 15379, 15391, 15392, 15395, 15396, 15397, 15400, 15404, 15406, 15408, 15409, 15413, 15423, 15424, 15426, 15427, 15428, 15429, 15437, 15439, 15440, 15442, 15443, 15444, 15445, 15446, 15455, 15456, 15458, 15459, 15460, 15461, 15462, 15464, 15469, 15470, 15475, 15485, 15488, 15489, 15490, 15491, 15493, 15494, 15496, 15498, 15499, 15500, 15501, 15503, 15504, 15506, 15530, 15532, 15533, 15534, 15535, 15536, 15537, 15540, 15541, 15553, 15554, 15557, 15571, 15573, 15597, 15603, 15616, 15617, 15618, 15619, 15621, 15623, 15624, 15625, 15626, 15627, 15647, 15673, 15675, 15677, 15678, 15679, 15695, 15705, 15706, 15712, 15725, 15727, 15728, 15733, 15738, 15744, 15745, 15790, 15851, 15864, 15967, 15976, 16175, 16178, 16478, 16497, 16501, 16506, 16577, 16599, 16606, 16658, 16709, 16737, 16768, 16770, 16957, 17010, 17011, 17013, 17014, 17016, 17018, 17114, 17347, 17349, 17351, 17352, 17355, 17454, 17457, 17485, 17486, 17535, 17576, 17630, 17979, 18171, 18277, 18352, 18450, 18575, 18624, 18742, 18759, 18838, 19220, 2038, 2039, 22667, 23065, 23306, 23318, 2335, 2336, 2338, 2339, 2340, 2341, 2342, 2345, 2346, 2348, 2349, 2350, 2351, 2352, 2357, 2362, 2376, 2377, 2397, 2399, 2400, 2401, 2408, 2409, 2412, 2413, 2415, 2417, 2418, 2419, 2420, 2421, 2422, 2423, 2424, 2429, 2430, 2431, 2432, 2433, 2434, 2435, 2436, 2437, 2439, 2440, 2441, 2443, 2444, 2445, 2447, 2449, 2450, 2452, 2453, 2454, 2458, 2460, 2462, 2463, 2464, 2465, 2466, 2467, 2468, 2470, 2475, 2476, 2479, 2483, 2486, 2488, 2489, 2490, 2493, 2494, 2495, 2496, 2497, 2498, 2507, 2508, 2512, 2515, 2516, 2518, 2524, 2525, 2526, 2527, 2528, 2529, 2530, 2531, 2532, 2533, 2534, 2537, 2538, 2539, 2540, 2541, 2542, 2543, 2544, 2545, 2546, 2547, 2548, 2549, 2550, 2551, 2554, 2555, 2560, 2561, 2562, 2563, 2564, 2566, 2569, 2570, 2571, 2572, 2573, 2577, 2578, 2583, 2584, 2585, 2586, 2587, 2588, 2593, 2594, 2598, 2607, 2609, 2610, 2614, 2617, 2618, 2620, 2621, 2622, 2625, 2626, 2634, 2635, 2636, 2637, 2638, 2639, 2642, 2653, 2654, 2655, 2680, 2694, 2695, 2696, 2714, 2717, 2723, 2730, 2736, 2741, 2743, 2744, 2748, 2780, 2815, 2817, 2819, 2823, 2850, 2851, 2852, 2853, 2854, 2855, 2856, 2866, 2871, 2873, 2875, 2876, 2877, 2902, 2903, 2904, 2905, 2907, 2909, 2910, 2920, 2921, 2922, 2926, 2950, 2951, 2952, 2972, 2994, 2995, 2996, 30000, 3001, 30016, 30018, 3002, 30022, 30027, 30028, 30029, 3003, 30031, 30032, 30033, 30035, 30036, 30038, 3004, 30041, 30042, 30043, 30044, 30045, 30046, 30047, 30048, 3005, 30055, 30056, 3006, 30062, 30064, 3007, 30072, 30076, 30077, 30078, 3008, 30083, 30084, 30085, 30088, 30089, 3009, 30090, 30091, 30092, 30093, 30094, 30095, 30099, 3010, 30100, 30103, 30104, 30105, 30106, 30107, 30110, 30113, 30114, 30115, 30118, 30120, 30121, 30124, 30126, 30127, 30131, 30132, 30133, 30134, 30135, 30136, 30137, 30138, 30139, 30140, 30141, 30144, 30145, 30147, 30148, 30149, 30150, 30151, 30152, 30153, 30154, 30155, 30156, 30157, 30158, 30161, 30162, 30163, 30164, 30165, 30167, 30169, 30170, 30171, 30172, 30173, 30174, 30175, 30176, 30177, 30179, 30180, 30181, 30183, 30189, 30190, 30191, 30192, 30193, 30194, 3020, 30201, 30202, 30208, 30209, 3021, 30210, 30213, 30214, 30218, 3022, 30222, 30223, 30224, 30225, 30228, 30229, 3023, 30236, 30237, 30238, 30239, 3024, 30240, 30246, 30248, 30249, 30250, 30251, 30256, 30258, 30259, 3026, 30260, 30261, 30263, 3027, 30272, 30273, 30274, 30275, 30276, 3028, 30284, 30285, 30286, 30287, 30288, 30289, 3029, 30291, 30292, 30293, 30294, 30296, 3030, 30300, 30303, 30304, 3031, 3032, 30320, 30322, 30323, 30324, 30325, 3033, 30332, 30338, 30339, 3034, 30340, 30342, 3035, 30350, 30355, 30356, 30357, 30358, 30359, 3036, 30360, 30361, 30362, 30363, 30364, 30365, 30366, 30367, 30368, 30369, 3037, 30370, 30372, 30373, 30374, 30375, 30376, 30377, 30378, 3038, 30380, 30381, 30382, 30383, 30384, 30385, 30386, 30387, 30388, 30389, 3039, 30390, 30391, 30394, 30395, 30396, 3040, 30400, 30401, 30407, 30408, 30409, 3041, 30410, 30413, 30414, 3042, 3043, 3044, 3045, 30456, 30459, 3046, 30460, 30464, 30475, 30478, 3048, 30480, 30483, 30485, 30488, 3049, 30491, 30497, 30499, 30503, 30504, 30505, 30516, 30517, 30518, 30526, 30527, 30528, 30529, 30530, 30535, 30536, 30540, 30541, 30552, 30553, 30554, 30561, 30562, 30565, 30586, 30592, 30593, 30596, 30601, 30602, 30603, 30608, 30613, 3062, 30622, 30626, 3063, 30632, 30633, 30644, 30647, 30648, 30649, 3065, 30658, 3066, 30663, 3067, 3068, 3069, 3070, 3134, 3139, 3176, 3183, 3184, 3185, 3186, 3187, 3188, 3189, 3190, 3191, 3192, 3193, 3194, 3195, 32000, 32001, 32002, 32005, 32006, 32007, 32008, 32009, 32012, 32013, 32014, 32015, 32016, 32017, 32018, 32019, 32020, 32028, 32030, 32034, 32039, 32052, 32053, 32054, 32056, 32059, 32060, 32062, 32063, 32064, 32065, 32068, 32069, 32072, 32073, 32083, 32084, 32086, 32123, 32124, 32125, 32126, 32132, 32138, 32140, 32146, 32173, 32174, 32175, 32177, 32184, 32187, 32188, 32189, 32190, 32191, 32192, 32198, 32199, 32200, 32201, 32202, 32235, 32249, 32250, 32251, 32269, 32270, 32271, 32278, 3228, 32291, 32293, 32294, 32310, 32316, 32324, 32333, 32348, 32449, 3245, 32474, 32475, 32476, 32494, 32498, 32506, 32523, 32524, 32525, 32526, 32527, 32528, 32529, 32530, 32531, 32532, 32534, 32535, 32555, 32556, 32557, 32558, 32580, 3297, 3298, 3299, 3300, 33007, 33009, 33025, 33048, 33051, 33054, 33057, 33061, 3307, 33078, 3308, 33085, 33120, 33121, 33122, 33125, 33129, 33170, 33172, 33175, 33176, 33183, 33207, 33211, 33212, 33215, 33216, 33243, 3326, 33279, 33286, 33291, 33299, 33303, 33320, 33322, 3403, 3404, 3436, 3455, 3456, 3460, 3464, 3470, 3471, 3474, 3475, 3479, 3482, 3483, 3489, 3490, 3581, 3582, 3585, 3586, 3587, 3596, 3614, 3622, 3623, 3624, 3625, 3626, 3629, 3633, 3634, 3639, 3640, 3641, 3644, 3647, 3648, 3649, 3650, 3659, 3660, 3665, 3666, 3673, 3675, 3676, 3678, 3679, 3680, 3685, 3688, 3700, 3701, 3702, 3703, 3705, 3706, 3707, 3708, 3709, 3710, 3711, 3729, 3730, 3736, 3737, 3738, 3741, 3743, 3747, 3750, 3752, 3754, 3755, 3778, 3787, 3788, 3794, 3795, 3811, 3814, 3815, 3816, 3817, 3818, 3819, 3820, 3821, 3822, 3823, 3828, 3829, 3830, 3831, 3832, 3833, 3834, 3835, 3836, 3837, 3838, 3839, 3840, 3841, 3842, 3844, 3846, 3847, 3848, 3849, 3852, 3853, 3854, 3855, 3856, 3861, 3865, 3873, 3876, 3878, 3894, 3895, 3896, 3898, 3899, 3900, 3901, 3933, 3934, 3935, 3936, 3937, 3938, 3939, 3940, 3942, 3943, 3956, 3957, 3958, 3959, 3960, 3961, 3962, 3963, 40001, 4003, 4006, 4019, 4022, 40232, 40233, 40234, 40235, 40238, 40239, 40240, 40241, 40242, 40243, 40244, 4025, 40251, 4032, 40339, 4034, 40340, 4035, 4036, 40373, 40374, 40375, 40378, 40379, 40384, 40385, 40386, 40387, 40388, 40389, 40390, 40393, 40395, 40396, 40397, 40490, 40620, 4070, 4079, 4080, 4081, 4083, 4084, 4085, 40902, 4093, 4094, 4095, 40996, 41141, 41239, 4130, 4131, 4132, 4133, 41334, 4150, 4151, 41529, 41530, 41531, 41532, 41533, 41535, 41539, 4156, 4161, 4162, 41630, 41669, 41671, 41677, 41678, 41747, 41748, 41749, 4175, 41750, 41751, 4176, 41761, 41762, 41763, 41764, 41765, 41766, 41767, 41768, 41769, 41770, 4181, 4182, 4183, 4185, 41854, 41855, 4186, 41862, 41879, 41881, 41883, 41889, 41890, 41896, 41897, 41982, 41984, 42003, 42013, 42060, 42061, 4207, 42074, 4208, 4209, 4210, 42109, 4211, 42114, 4212, 4213, 4214, 4215, 4216, 4217, 4218, 4219, 4220, 4221, 4222, 4228, 4229, 4237, 4238, 42409, 42443, 42444, 42445, 42446, 42447, 42448, 42450, 42511, 4254, 4255, 42602, 42604, 42608, 42610, 42611, 4266, 42687, 4274, 4275, 4276, 4282, 4284, 4285, 4286, 4287, 4288, 4289, 42936, 42938, 42941, 42942, 43085, 43086, 43093, 43121, 43122, 4315, 4328, 4332, 4337, 4341, 4342, 4345, 4346, 4349, 4360, 43675, 43702, 43708, 43710, 43711, 43712, 43713, 43719, 43720, 43721, 43722, 43723, 43744, 43746, 43750, 43751, 43802, 43857, 43887, 43888, 43889, 43891, 43892, 43894, 43898, 43899, 43900, 43903, 43936, 44032, 44041, 44042, 44126, 44224, 44225, 44237, 4424, 4429, 44292, 44294, 44300, 44301, 44302, 44308, 44309, 4433, 44336, 44341, 44342, 44343, 44350, 44351, 44352, 44353, 44358, 44359, 44360, 44374, 44375, 4438, 4444, 4445, 4447, 4448, 4449, 44493, 44567, 44568, 44569, 44570, 44571, 44572, 4460, 44608, 44658, 4466, 44661, 4467, 44674, 44675, 44676, 44728, 4474, 4476, 4477, 44771, 44772, 4479, 44809, 44822, 4485, 4488, 4489, 4490, 4491, 4492, 4493, 4495, 4496, 4497, 4498, 4499, 4503, 4505, 4506, 4509, 4510, 45106, 4511, 4515, 45165, 4518, 4519, 4522, 4523, 4524, 4528, 4529, 4530, 45301, 4531, 4532, 4533, 4536, 45406, 45410, 45411, 45590, 45677, 45705, 45707, 45708, 45749, 4588, 4589, 4590, 4591, 45917, 45918, 4592, 4593, 4594, 4595, 4596, 4597, 4598, 45982, 4599, 4600, 4617, 46203, 4623, 4624, 4625, 46303, 46304, 46413, 4697, 4714, 4715, 4716, 4719, 4727, 4728, 4729, 47297, 47298, 47299, 47300, 4732, 47328, 4733, 47330, 4735, 4736, 4737, 4738, 4739, 47397, 47398, 4740, 47404, 47405, 47406, 47407, 4741, 4742, 47432, 4744, 47452, 47454, 47455, 47456, 47457, 47458, 4746, 47474, 47501, 47506, 47507, 47508, 47543, 47545, 47576, 4770, 47712, 47713, 47720, 47753, 47755, 47757, 47758, 47759, 47843, 47844, 47846, 47847, 47899, 4790, 47905, 4794, 47973, 47974, 47975, 47990, 47991, 47992, 47994, 47996, 47998, 48002, 48005, 48092, 48168, 48169, 48170, 48171, 48172, 48183, 48253, 48284, 48288, 48294, 48336, 4844, 48452, 48457, 48485, 48486, 48487, 48488, 48489, 48490, 48492, 48493, 48494, 48495, 48496, 4854, 4855, 4856, 4857, 4858, 4861, 4862, 4863, 4864, 4865, 4868, 4869, 4870, 4871, 4872, 48723, 48724, 48729, 48812, 48933, 48989, 49668, 50231, 50254, 50303, 50304, 50305, 50373, 50450, 50451, 50687, 50745, 50746, 50747, 50859, 50860, 50861, 50862, 50914, 50923, 50943, 50944, 50946, 50947, 50948, 50949, 50950, 50951, 50955, 50956, 50967, 50986, 50990, 50995, 51000, 51342, 51344, 51345, 51349, 51595, 51641, 51642, 51643, 51644, 51645, 51663, 51739, 51858, 51874, 52031, 52036, 52037, 52038, 52040, 52041, 52107, 52258, 52345, 52501, 53400, 53401, 53450, 53451, 53452, 53454, 53457, 53533, 53542, 53543, 53545, 53550, 53551, 53562, 53568, 53585, 53586, 53588, 53590, 53591, 53592, 53593, 53594, 53595, 53596, 53597, 53598, 53599, 53788, 53792, 53981, 53982, 53983, 53984, 53988, 53989, 53992, 54090, 54091, 54093, 54094, 54095, 54096, 54097, 54120, 54125, 54177, 54271, 54272, 54274, 54275, 54276, 54383, 54384, 54654, 54655, 54715, 54725, 54755, 54757, 54779, 54809, 54821, 54872, 54873, 54923, 54931, 55013, 55205, 55209, 55236, 55240, 55295, 55296, 55297, 55298, 55299, 55300, 55615, 55668, 55676, 55704, 55706, 55767, 55768, 55817, 55963, 55967, 55968, 55969, 55976, 55978, 55981, 55982, 56145, 56246, 56247, 56248, 56249, 56250, 56251, 56252, 56253, 56254, 56255, 56256, 56257, 56619, 56630, 56750, 56890, 56891, 56897, 56898, 56902, 56904, 56908, 57028, 57029, 57051, 57274, 57467, 57503, 57504, 57505, 57506, 57515, 57518, 57519, 57520, 57528, 57539, 57543, 57557, 57558, 57563, 57564, 57565, 57568, 57575, 57576, 57577, 57578, 57579, 57582, 57583, 57585, 57587, 57588, 57779, 57781, 57783, 57792, 57893, 57894, 57895, 57899, 57900, 57906, 57908, 57909, 57999, 58088, 58090, 58124, 58135, 58136, 58148, 58150, 58176, 58177, 58181, 58247, 58367, 58380, 58381, 58558, 58827, 58842, 58844, 58845, 58846, 58856, 58947, 59143, 59146, 59154, 59158, 59165, 59220, 59222, 59224, 59227, 59228, 59229, 59230, 59231, 59232, 59233, 59275, 59278, 59349, 59362, 59363, 59365, 59426, 59443, 59492, 59510, 59521, 59807, 59895, 59900, 6002, 6003, 60032, 60033, 6005, 6007, 600815, 600880, 60115, 6014, 6015, 6016, 601607, 60169, 60176, 6019, 6020, 60208, 6021, 60212, 60219, 6023, 6025, 6026, 6027, 6028, 6030, 6032, 6037, 6039, 6040, 6041, 60410, 6042, 6043, 6044, 604547, 604548, 604549, 604550, 604551, 604552, 604553, 6046, 604614, 604615, 6047, 60470, 60471, 60474, 60475, 60476, 60477, 60478, 60479, 6048, 60481, 60483, 60484, 60485, 6055, 6056, 6057, 6058, 60581, 60583, 6059, 60592, 60593, 60594, 60596, 60598, 60599, 6060, 60601, 60602, 60603, 60607, 60608, 6061, 60614, 60616, 60621, 60623, 6063, 6064, 60640, 60641, 6065, 60657, 60658, 6066, 6067, 60671, 60672, 60673, 60674, 6070, 6072, 60747, 60748, 60749, 6075, 60750, 60751, 60752, 6076, 60779, 6078, 6079, 60797, 60800, 60803, 60806, 60808, 6081, 6082, 6083, 60849, 6086, 6087, 6088, 6089, 60896, 60897, 6090, 60900, 60902, 6091, 60917, 60918, 60928, 6093, 60930, 60934, 60935, 6098, 6101, 6104, 6105, 61054, 6106, 61068, 61069, 6107, 61070, 61071, 61072, 61073, 6108, 6111, 6112, 6117, 6118, 61182, 61183, 61184, 61189, 6119, 61191, 61193, 61195, 61196, 61199, 6120, 61200, 6122, 6123, 6124, 6125, 61252, 61254, 6126, 6127, 6128, 61280, 6131, 6132, 6133, 6134, 61345, 6135, 61356, 6139, 6140, 61403, 61406, 61409, 6141, 6143, 6148, 61480, 61481, 61482, 61483, 61484, 61485, 61487, 61506, 61510, 6152, 61521, 61523, 61524, 6153, 6154, 6155, 6157, 6158, 6162, 6165, 61678, 6177, 6178, 61780, 6179, 61795, 6180, 61800, 61801, 61804, 61805, 6182, 6183, 6184, 61856, 6187, 6188, 6190, 61904, 61905, 6191, 6192, 6195, 61975, 61976, 6203, 6205, 6206, 6211, 62113, 6212, 6213, 6215, 6216, 6218, 6219, 6222, 62271, 62273, 62274, 62275, 6228, 6231, 6232, 6233, 6234, 6235, 62359, 6236, 62360, 62361, 6237, 6238, 62386, 6239, 62408, 62436, 62438, 6245, 62462, 6248, 6249, 6251, 6252, 62520, 6253, 62530, 62531, 62537, 6254, 6255, 6256, 62575, 62576, 62577, 62578, 6260, 62604, 6265, 6266, 6267, 6269, 62691, 62694, 62695, 62696, 62697, 62698, 62699, 62700, 62701, 62711, 62712, 62743, 62792, 62808, 62810, 62812, 62821, 62885, 63082, 63140, 63141, 63142, 63585, 63586, 63864, 63868, 63869, 63965, 64178, 64179, 64225, 64228, 64230, 64248, 64251, 64262, 64272, 64275, 64276, 64292, 64296, 64297, 64299, 64305, 64307, 64308, 64311, 64321, 64328, 64330, 64390, 64391, 64392, 64393, 64394, 64415, 64417, 64424, 64448, 64449, 64450, 64451, 64453, 64566, 64567, 64572, 64573, 64644, 64645, 64647, 64648, 64651, 64680, 64681, 64682, 64683, 64711, 64712, 64713, 64727, 64728, 64767, 64776, 64778, 64780, 64781, 64782, 64783, 64784, 64785, 64796, 64797, 64798, 64799, 64802, 64803, 64804, 64805, 64806, 64807, 64808, 64847, 64867, 64892, 64951, 6536, 6538, 6539, 6541, 6542, 6546, 6553, 6556, 6558, 6562, 6564, 6565, 6567, 6571, 6572, 6573, 6574, 6575, 6576, 6578, 6579, 6580, 6581, 6582, 6583, 6584, 6585, 6587, 6588, 6589, 6590, 6592, 6628, 6629, 6630, 6632, 6636, 6641, 6881, 6936, 6942, 70358, 70644, 70720, 70973, 71015, 71075, 71076, 71128, 71137, 71151, 71155, 71342, 71372, 71591, 71594, 71606, 71861, 71917, 71923, 71966, 71985, 71986, 72039, 72092, 72156, 72326, 72454, 72475, 72504, 72824, 73092, 73194, 73594, 73843, 74042, 74043, 74261, 74573, 74665, 74698, 74699, 74746, 74747, 74784, 74880, 74967, 74968, 75174, 75347, 75535, 75541, 75542, 75902, 75904, 75937, 75977, 76029, 76033, 76040, 76041, 76247, 76254, 76255, 76257, 76270, 76275, 76277, 76302, 76324, 76385, 76409, 76442, 76443, 76764, 76766, 76768, 84954, 85059, 85080, 85197, 85198, 85543, 85544, 85545, 85546, 85557, 85558, 85582, 85861, 85863, 85940, 85941, 85942, 85943, 85944, 85945, 85946, 85947, 85948, 85959, 85961, 85962, 85969, 85970, 85973, 85974, 85975, 85976, 85977, 85979, 85983, 85984, 86035, 86058, 86059, 86208, 86500, 86652, 87058, 87079, 87080, 87081, 87082, 87083, 87086, 87087, 87407, 87408, 87414, 87421, 87543, 87544, 87552, 87555, 87556, 87557, 87559, 87560, 87561, 87564, 87565, 87566, 87567, 87568, 87569, 87570, 87571, 87580, 87585, 87587, 87601, 87606, 87609, 87610, 87611, 87612, 87613, 87614, 87615, 87616, 87617, 87618, 87619, 87620, 87621, 87685, 87686, 87687, 87688, 87689, 87690, 87691, 87692, 87693, 87694, 87695, 87696, 87697, 87745, 87747, 87749, 87750, 87751, 87752, 87753, 87754, 87756, 87757, 87758, 87761, 87777, 87780, 87781, 87788, 87789, 87790, 87791, 87794, 87796, 87797, 87798, 87799, 87800, 87801, 87802, 87803, 87805, 87806, 87807, 87808, 87809, 87811, 87812, 87814, 87815, 87817, 87820, 87821, 87822, 87823, 87824, 87826, 87827, 87828, 87831, 87837, 87841, 87843, 87846, 87913, 87926, 87957, 87989, 87990, 87991, 87992, 87993, 87994, 87995, 87996, 87997, 87998, 87999, 88000, 88001, 88049, 88065, 88072, 88283, 88284, 88286, 88287, 88288, 88289, 88290, 88291, 88292, 88293, 88295, 88323, 88393, 88516, 88517, 88616, 88618, 88646, 88695, 88704, 88811, 88812, 88930, 88964, 89079, 89159, 89201, 89509, 89519, 89520, 89522, 89523, 89524, 89536, 89650, 89651, 89669, 89670, 89752, 89762, 89801, 89917, 89918, 89973, 89974, 90109, 90192, 90193, 90194, 90195, 90201, 90202, 90258, 90322, 90386, 90388, 90390, 90391, 90392, 90393, 90395, 90396, 90397, 90398, 9044, 90462, 90498, 90508, 90509, 90538, 90539, 90540, 90541, 90542, 90605, 90607, 90608, 90609, 90611, 90612, 90613, 90615, 90616, 90617, 90622, 90623, 90625, 90626, 90630, 90634, 90636, 90638, 90639, 90640, 90641, 90649, 90650, 90652, 90661, 90981, 91049, 91176, 91347, 91405, 91501, 91884, 91966, 91968, 91988, 91996, 92013, 92026, 92081, 92082, 92083, 92084, 92086, 92088, 92092, 92099, 92107, 92199, 92201, 92202, 92203, 92204, 92205, 92206, 92207, 92208, 92209, 92210, 92211, 92212, 92213, 92214, 92215, 92216, 92217, 92218, 92219, 92220, 92221, 92222, 92223, 92224, 92225, 92226, 92227, 92228, 92229, 92230, 92231, 92232, 92233, 92234, 92235, 92238, 92254, 92255, 92256, 92257, 92258, 92259, 92262, 92263, 92279, 92280, 92284, 92285, 92290, 92338, 92339, 92340, 92402, 92409, 92410, 92438, 92474, 92547, 92553, 92579, 92580, 92582, 92583, 92584, 92585, 92586, 92589, 92590, 92591, 92593, 92690, 92691, 92692, 92694, 92695, 92696, 92709, 92713, 92715, 92716, 92738, 92741, 92742, 92743, 92744, 92745, 92746, 92747, 92750, 92751, 92753, 92754, 92755, 92756, 92758, 92759, 92760, 92761, 92762, 92814, 92842, 92903, 92906, 92907, 92908, 92909, 92910, 92911, 92912, 92926, 92943, 92944, 92945, 92946, 92947, 92950, 93055, 93056, 93057, 93058, 93059, 93060, 93061, 93062, 93064, 93065, 93066, 93067, 93068, 93069, 93070, 93071, 93072, 93088, 93089, 93090, 93091, 93092, 93094, 93095, 93096, 93106, 93140, 93160, 93168, 93170, 93173, 93216, 93217, 93218, 93219, 93220, 93221, 93222, 93223, 93224, 93225, 93228, 93230, 93231, 93247, 93248, 93249, 93250, 93251, 93252, 93273, 93274, 93277, 93348, 93352, 93549, 93550, 93551, 93552, 93553, 93554, 93555, 93556, 93557, 93558, 93559, 93560, 93561, 93562, 93563, 93564, 93565, 93568, 93571, 93575, 93587, 93589, 93590, 93591, 93593, 93594, 93595, 93597, 93598, 93604, 93606, 93609, 93888, 94161, 94162, 94531, 94717, 94718, 94719, 94720, 94721, 94722, 94723, 94724, 94725, 94925, 94984, 95049, 95050, 95051, 95052, 95053, 95054, 95120, 95188, 95198, 95199, 95200, 95201, 95202, 95203, 95204, 95222, 95223, 95224, 95225, 95226, 95227, 95228, 95229, 95319, 95320, 95321, 95322, 95323, 95324, 95326, 95327, 95328, 95330, 95341, 95342, 95343, 95344, 95345, 95347, 95348, 95350, 95351, 95352, 95354, 95646, 95650, 95652, 95654, 95673, 95674, 95676, 95678, 95749, 95820, 95827, 95828, 95829, 95831, 95832, 96204, 96207, 96479, 96480, 96481, 96482, 96483, 96484, 96485, 96486, 96487, 96488, 96489, 96490, 96491, 96858, 96859, 96874, 96904, 96905, 96906, 96907, 96910, 97492, 97690, 97781, 97782, 97783, 97784, 97785, 97787, 97790, 97791, 97793, 97895, 97927, 98011, 98051, 98055, 98057, 98058, 98059, 98065, 98067, 98068, 98069, 98071, 98072, 98086, 98087, 98088, 98089, 98090, 98099, 98100, 98101, 98102, 98103, 98106, 98108, 98116, 98117, 98118, 98119, 98120, 98127, 98128, 98129, 98130, 98132, 98133, 98134, 98135, 98136, 98137, 98138, 98139, 98141, 98143, 98145, 98146, 98147, 98148, 98150, 98151, 98153, 98160, 98162, 98163, 98165, 98262, 98263, 98279, 98280, 98281, 98282, 98283, 98284, 98285, 98286, 98287, 98288, 98289, 98290, 98292, 98294, 98302, 98313, 98338, 98341, 98342, 98343, 98344, 98345, 98347, 98348, 98365, 98366, 98367, 98368, 98369, 98370, 98371, 98372, 98373, 98374, 98375, 98376, 98377, 98378, 98379, 98381, 98382, 98383, 98384, 98385, 98386, 98387, 98388, 98389, 98397, 98549, 98562, 98563, 98564, 98565, 98566, 98567, 98568, 98569, 98570, 98571, 98573, 98574, 98575, 98577, 98578, 98579, 98580, 98581, 98582, 98585, 98587, 98588, 98589, 98590, 98592, 98593, 98594, 98596, 98597, 98602, 98603, 98604, 98606, 98608, 98653, 98721, 98722, 98723, 98725, 98726, 98729, 98834, 98835, 98989, 99008, 99009, 99010, 99012, 99013, 99021, 99061, 99206, 99207, 99239, 99240, 99241, 99242, 99243, 99244, 99245, 99246, 99248, 99249, 99250, 99251, 99252, 99253, 99254, 99301, 99380, 99386, 99464, 99563, 99773, 99774, 99778, 99780, 99781, 99784, 99809, 99818, 99930, 99948}));

//            ArrayList<Integer> brickFiles = new ArrayList<>();
//            brickFiles.add(3005);
//            brickFiles.add(3006);
//            brickFiles.add(3007);
//            brickFiles.add(3008);
//            Files.walk(Paths.get(path + "Primitives/LOD0/")).forEach(filePath -> {
//                if (Files.isRegularFile(filePath)) {
//
//                    String fileName = com.google.common.io.Files.getNameWithoutExtension(filePath.toString());
//                    String fileExtension = com.google.common.io.Files.getFileExtension(filePath.toString());
//                    if (fileExtension.equals("g")) {
//                        try {
//                            brickFiles.add(Integer.parseInt(fileName));
//                        } catch (NumberFormatException ignored) {
//                        }
//                    }
//                }
//            });
            System.out.println("Loaded " + brickFiles.size() + " bricks");

            File lifFile = new File("/Users/iassael/Drive/Code/projects/github/torch/torch-lego/db/db.lif");
            LIFReader lifReader = LIFReader.openLIFFile(lifFile);

            for (Integer brickId : brickFiles) {

                // Load Brick
//                String bickFilename = path + "Primitives/LOD0/" + brickId + ".g";
//                File brickFile = new File(bickFilename);
//                VBOContents vboBrick = BrickReader.readGeometryFile(brickFile);

                VBOContents vboBrick = BrickReader.readBrick(lifReader, brickId);

                //System.out.println(Arrays.toString(vboBrick.vertices));
                //System.out.println(Arrays.toString(vboBrick.textures));
                //System.out.println(Arrays.toString(vboBrick.normals));
                //System.out.println(Arrays.toString(vboBrick.indices));

                // Save Brick to OBJ
                File objFile = new File("objs/" + brickId + ".obj");
                PrintWriter objPrintWriter = new PrintWriter(objFile);

                OBJSaver.writeGroup(vboBrick, "1", objPrintWriter, brickId, 0);

                // Flush and close the writer
                objPrintWriter.flush();
                objPrintWriter.close();
                System.out.println("Saving brick " + brickId);
            }

        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
